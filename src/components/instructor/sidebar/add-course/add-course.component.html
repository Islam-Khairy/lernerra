<form action="" [formGroup]="this.CourseForm" (ngSubmit)="this.createCourse()">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8 m-8">
    <div class="col-span-1 flex flex-col gap-2">
      <label for="title">Name</label>
      <input
        type="text"
        id="title"
        formControlName="name"
        class="border border-gray-300 rounded-md p-3 w-full"
      />
      @if ( CourseForm.get('name')?.errors &&CourseForm.get('name')?.touched ) {
            <p *ngIf="CourseForm.get('name')?.getError('required')" class="text-red-700">Name is required</p> 
            <p *ngIf="CourseForm.get('name')?.getError('minlength')" class="text-red-700">Name must be more than 3 characters</p> 
      }
    </div>
    <div class="col-span-1 flex flex-col gap-2">
      <label for="category">Category</label>
      <select name="category" formControlName="categoryId"  id="category" class="border border-gray-300 rounded-md p-3 w-full">
        @for (item of categories; track $index) {
          <option [value]="item.id">{{item.name}}</option>
        }
      </select>
      @if ( CourseForm.get('categoryId')?.errors &&CourseForm.get('categoryId')?.touched ) {
            <p *ngIf="CourseForm.get('categoryId')?.getError('required')" class="text-red-700">Category is required</p> 
      }
    </div>
    <div class="col-span-1 flex flex-col gap-2">
      <label for="description">Description</label>
      <input
        type="text"
        id="description"
        formControlName="description"
        class="border border-gray-300 rounded-md p-3 w-full"
      />
      @if ( CourseForm.get('description')?.errors &&CourseForm.get('description')?.touched ) {
            <p *ngIf="CourseForm.get('description')?.getError('required')" class="text-red-700">Description is required</p> 
            <p *ngIf="CourseForm.get('description')?.getError('minlength')" class="text-red-700">Description must be more than 10 characters</p> 
      }
    </div>
    <div class="col-span-1 flex flex-col gap-2">
      <label for="price">Price</label>
      <input
        type="number"
        id="price"
        formControlName="price"
        class="border border-gray-300 rounded-md p-3 w-full"
      />
      @if ( CourseForm.get('price')?.errors && CourseForm.get('price')?.touched ) {
            <p *ngIf="CourseForm.get('price')?.getError('required')" class="text-red-700">Price is required</p> 
            <p *ngIf="CourseForm.get('price')?.getError('min')" class="text-red-700">Price must be greater than 0</p> 
      }
    </div>
    <div class="col-span-1 flex flex-col gap-2">
      <label for="image">Image</label>
      <div class="relative">
        <input
          type="file"
          id="image"
          accept="image/*"
          (change)="onCourseImageSelect($event)"
          class="hidden"
          #fileInput
        />
        <div
          (click)="fileInput.click()"
          class="border border-gray-300 rounded-md p-3 w-full cursor-pointer hover:bg-gray-50 transition-colors"
        >
          <div class="flex items-center justify-between">
            <span [class.text-gray-500]="!selectedImage">
              {{ selectedImage ? selectedImage.name : "Choose file" }}
            </span>
            <i class="pi pi-upload text-gray-500"></i>
          </div>
        </div>
        
        @if (imagePreview) {
        <div class="mt-3 relative">
          <img
            [src]="imagePreview"
            alt="Course preview"
            class="w-200 h-fit object-cover rounded-md"
          />
          <button
            type="button"
            (click)="removeImage()"
            class="absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 shadow-lg"
          >
            <i class="pi pi-times text-sm"></i>
          </button>
        </div>
        }
        @if ( CourseForm.get('imageUrl')?.errors ) {
            <p *ngIf="CourseForm.get('imageUrl')?.getError('required')" class="text-red-700">Image is required</p> 
      }
      </div>
      
  </div>
  <div class="flex justify-end ">
          <input type="submit" value="Save" class="bg-green-600 hover:bg-green-700 text-white cursor-pointer px-3 py-2 h-fit my-5" >
        </div>
    </div>
</form>
